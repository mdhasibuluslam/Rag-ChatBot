{"ast":null,"code":"var _jsxFileName = \"E:\\\\Agent_UI_0.1\\\\frontend\\\\src\\\\components\\\\ ChatInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport FileUpload from \"./FileUpload\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInput = ({\n  onNewMessage,\n  onUpload\n}) => {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const submit = async () => {\n    if (!text.trim()) return;\n\n    // ðŸ§  user message\n    onNewMessage({\n      sender: \"user\",\n      text\n    });\n    setLoading(true);\n    setText(\"\");\n    try {\n      const res = await fetch(\"http://localhost:8000/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          query: text\n        })\n      });\n      if (!res.ok) {\n        const errText = await res.text();\n        console.error(\"/chat error\", res.status, errText);\n        onNewMessage({\n          sender: \"assistant\",\n          text: `Error: ${res.status} ${errText}`\n        });\n        setLoading(false);\n        return;\n      }\n      let data = null;\n      try {\n        data = await res.json();\n      } catch (e) {\n        console.error(\"Failed to parse /chat JSON\", e);\n      }\n      const answer = data && data.answer ? data.answer : \"(No answer returned)\";\n      onNewMessage({\n        sender: \"assistant\",\n        text: answer\n      });\n    } catch (e) {\n      console.error(\"Fetch /chat failed\", e);\n      onNewMessage({\n        sender: \"assistant\",\n        text: `Request failed: ${e.message}`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-3 space-y-2\",\n    children: [/*#__PURE__*/_jsxDEV(FileUpload, {\n      onUploadComplete: () => {\n        onNewMessage({\n          sender: \"assistant\",\n          text: \"ðŸ“„ File uploaded & indexed successfully.\"\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: text,\n        onChange: e => setText(e.target.value),\n        placeholder: \"Ask something...\",\n        className: \"flex-1 px-4 py-2 rounded-lg bg-slate-800 outline-none\",\n        onKeyDown: e => e.key === \"Enter\" && submit()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: submit,\n        className: \"px-4 rounded-lg bg-slate-700 hover:bg-slate-600\",\n        disabled: loading,\n        children: loading ? \"Thinking...\" : \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInput, \"zOQ0RuwA9kan70rhL0xkCo75hac=\");\n_c = ChatInput;\nexport default ChatInput;\nvar _c;\n$RefreshReg$(_c, \"ChatInput\");","map":{"version":3,"names":["React","useState","FileUpload","jsxDEV","_jsxDEV","ChatInput","onNewMessage","onUpload","_s","text","setText","loading","setLoading","submit","trim","sender","res","fetch","method","headers","body","JSON","stringify","query","ok","errText","console","error","status","data","json","e","answer","message","className","children","onUploadComplete","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","placeholder","onKeyDown","key","onClick","disabled","_c","$RefreshReg$"],"sources":["E:/Agent_UI_0.1/frontend/src/components/ ChatInput.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport FileUpload from \"./FileUpload\";\r\n\r\nconst ChatInput = ({ onNewMessage, onUpload }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const submit = async () => {\r\n    if (!text.trim()) return;\r\n\r\n    // ðŸ§  user message\r\n    onNewMessage({ sender: \"user\", text });\r\n\r\n    setLoading(true);\r\n    setText(\"\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/chat\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ query: text })\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const errText = await res.text();\r\n        console.error(\"/chat error\", res.status, errText);\r\n        onNewMessage({ sender: \"assistant\", text: `Error: ${res.status} ${errText}` });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      let data = null;\r\n      try {\r\n        data = await res.json();\r\n      } catch (e) {\r\n        console.error(\"Failed to parse /chat JSON\", e);\r\n      }\r\n\r\n      const answer = data && data.answer ? data.answer : \"(No answer returned)\";\r\n      onNewMessage({ sender: \"assistant\", text: answer });\r\n\r\n    } catch (e) {\r\n      console.error(\"Fetch /chat failed\", e);\r\n      onNewMessage({ sender: \"assistant\", text: `Request failed: ${e.message}` });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3 space-y-2\">\r\n\r\n      {/* âœ… FIXED: onUpload passed */}\r\n      <FileUpload onUploadComplete={() => {\r\n        onNewMessage({\r\n          sender: \"assistant\",\r\n          text: \"ðŸ“„ File uploaded & indexed successfully.\"\r\n        });\r\n      }} />\r\n\r\n      <div className=\"flex gap-2\">\r\n        <input\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          placeholder=\"Ask something...\"\r\n          className=\"flex-1 px-4 py-2 rounded-lg bg-slate-800 outline-none\"\r\n          onKeyDown={(e) => e.key === \"Enter\" && submit()}\r\n        />\r\n\r\n        <button\r\n          onClick={submit}\r\n          className=\"px-4 rounded-lg bg-slate-700 hover:bg-slate-600\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Thinking...\" : \"Send\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}